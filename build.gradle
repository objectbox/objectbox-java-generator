buildscript {
    ext {
        android_version = '3.3.0' // minimal supported version is 3.0.0
        kotlin_version = '1.3.11'
        mockito_version = '2.23.0'
        
        objectbox_version = '2.3.2' // used to version this projects' artifacts
        objectbox_plugin_version = objectbox_version // used to version this projects' artifacts
        objectbox_java_version = objectbox_version // used for plugin dependencies
        objectbox_runtime_version = objectbox_version // used as runtime library (projects using plugin)
    }

    repositories {
        jcenter()
        mavenCentral()
        google()
        maven { url "https://plugins.gradle.org/m2/" }
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath "gradle.plugin.de.fuerstenau:BuildConfigPlugin:1.1.8" // for code-modifier, gradle-plugin
        classpath "com.github.ben-manes:gradle-versions-plugin:0.20.0"
    }
}

apply plugin: "com.github.ben-manes.versions"
apply from: 'gradle/objectbox-deploy.gradle'

subprojects {
    version = "$objectbox_plugin_version"

    repositories {
        jcenter()
        mavenCentral()
        mavenLocal()
    }
}

task cleanOut {
    description 'Clears IntelliJ build folders "out/"'
    doLast {
        project.allprojects {
            def outDir = file("out")
            if(outDir.isDirectory()) {
                def deleted = delete outDir
                println "Deleted dir \"${outDir.getAbsolutePath()}\": $deleted"
            }
        }
    }
}
